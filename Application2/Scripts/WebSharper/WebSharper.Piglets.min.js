(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W;$.Define($$,{WebSharper:{Piglets:{Choose:{Stream:$.Class({Choice:function(X,Y){var Z,_0,_5=this;Z=f.New12();_0=[false];this.subscriptions[0]=$.New(h,{$:1,$0:this.pStream.Subscribe(function(_1){var _2,_3,_4;if(_1.$==0){_2=_1.$0[1];_3=_1.$0[0];_4=Z.ContainsKey(_3)?Z.get_Item(_3):_2.view.call(null,Y);_5.out.Trigger(_2.stream.get_Latest());if(_0[0]){X.Remove(0);}_0[0]=true;return X.Add(_4);}else{return null;}}),$1:_5.subscriptions[0]});return X.get_Container();},Chooser:function(_6){return this.chooser.view.call(null,_6);},Dispose:function(){var _7;_7=i.Get(this.subscriptions[0]);try{while(_7.MoveNext()){_7.get_Current().Dispose();}}finally{if(_7.Dispose!=undefined){_7.Dispose();}}return j.iter(function(_8){return(k.KeyValue(_8))[1][1].Dispose();},this.choiceSubscriptions);},Subscribe:function(_9){return this.out.Subscribe(_9);},get_ChooserStream:function(){return this.chooser.stream;},get_Latest:function(){return this.out.get_Latest();}},{New:function(_,ba,bb){var bc;bc=$.New(this,d.New(bb.get_Id()));bc.chooser=_;bc.out=bb;bc.pStream=l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0});bc.choiceSubscriptions=f.New12();bc.subscriptions=[g.ofArray([bc.chooser.stream.Subscribe(function(bd){return bc.pStream.Trigger(m.Map(function(be){var bf,bg,bh;if(bc.choiceSubscriptions.ContainsKey(be)){bf=(bc.choiceSubscriptions.get_Item(be))[0];}else{bg=ba(be);bh=bc.out;bc.choiceSubscriptions.set_Item(be,[bg,bg.stream.Subscribe(function(bi){return bh.Trigger(bi);})]);bf=bg;}return[be,bf];},bd));})])];return bc;}})},ConcreteReader:$.Class({Subscribe:function(bi){return this.subscribe.call(null,bi);},get_Latest:function(){return this.latest.call(null,null);}},{New:function(bj,bk){var bl;bl=$.New(this,d.New((o.next())(null)));bl.latest=bj;bl.subscribe=bk;return bl;}}),ConcreteWriter:$.Class({Trigger:function(bm){return this.trigger.call(null,bm);}},{New:function(bn){var bo;bo=$.New(this,{});bo.trigger=bn;return bo;},New1:function(bp){return p.New(function(bq){return bq.$==1?null:bp(bq.$0);});}}),ConstReader:$.Class({Subscribe:function(){return r.New(function(){});},get_Latest:function(){return this.x;}},{New:function(bt){var bu;bu=$.New(this,d.New((o.next())(null)));bu.x=bt;return bu;}}),Controls:{Attr:function(bv,bw,bx,by){u.OnAfterRender(function(bz){var bA;bA=function(bB){var bC;if(bB.$==0){bC=bx(bB.$0);return bz["HtmlProvider@33"].SetAttribute(bz.get_Body(),bw,bC);}else{return null;}};bA(bv.get_Latest());bv.Subscribe(bA);return;},by);return by;},AttrResult:function(bD,bE,bF,bG){u.OnAfterRender(function(bH){var bI;bI=function(bJ){var bK;bK=bF(bJ);return bH["HtmlProvider@33"].SetAttribute(bH.get_Body(),bE,bK);};bI(bD.get_Latest());bD.Subscribe(bI);return;},bG);return bG;},Button:function(bL){var bM,bN,bO;bM=$.New(h,{$:0});bN=v.Tags().NewTag("button",bM);bO=function(){return function(){return bL.Trigger($.New(m,{$:0,$0:null}));};};w.Events().OnClick(bO,bN);return bN;},ButtonValidate:function(bR){var bS;bS=x.Button(bR);return x.EnableOnSuccess(bR.get_Input(),bS);},CheckBox:function(bT){var bU,bV,bW,bX,bY,bZ,b2;bU=(x.nextId())(null);bV=v.Tags();bW=g.ofArray([y.Attr().NewAttr("type","checkbox"),y.Attr().NewAttr("id",bU)]);bX=bV.NewTag("input",bW);bY=bT.get_Latest();if(bY.$==0){bZ=bY.$0;bX.get_Body().checked=bZ;}bT.Subscribe(function(b0){var b1;if(b0.$==1){return null;}else{b1=b0.$0;return!z.Equals(bX.get_Body().checked,b1)?void(bX.get_Body().checked=b1):null;}});b2=function(){return bT.Trigger($.New(m,{$:0,$0:bX.get_Body().checked}));};bX.get_Body().addEventListener("change",b2,true);return bX;},Css:function(b4,b5,b6,b7){u.OnAfterRender(function(b8){var b9;b9=function(b_){var b$;if(b_.$==0){b$=b6(b_.$0);return b8["HtmlProvider@33"].SetCss(b8.get_Body(),b5,b$);}else{return null;}};b9(b4.get_Latest());b4.Subscribe(b9);return;},b7);return b7;},CssResult:function(ca,cb,cc,cd){u.OnAfterRender(function(ce){var cf;cf=function(cg){var ch;ch=cc(cg);return ce["HtmlProvider@33"].SetCss(ce.get_Body(),cb,ch);};cf(ca.get_Latest());ca.Subscribe(cf);return;},cd);return cd;},EnableOnSuccess:function(ci,cj){u.OnAfterRender(function(ck){ck.get_Body().disabled=!ci.get_Latest().get_isSuccess();ci.Subscribe(function(cl){ck.get_Body().disabled=!cl.get_isSuccess();});return;},cj);return cj;},HtmlContainer:$.Class({Add:function(cm){return this.container.AppendI(cm);},MoveUp:function(cn){var co,cp;co=this.container.get_Body().childNodes[cn];cp=this.container.get_Body().childNodes[cn-1];this.container.get_Body().removeChild(co);this.container.get_Body().insertBefore(co,cp);return;},Remove:function(cq){this.container.get_Body().removeChild(this.container.get_Body().childNodes[cq]);},get_Container:function(){return this.container;}},{New:function(cr){var cs;cs=$.New(this,{});cs.container=cr;return cs;}}),IntInput:function(ct){return x.input("number",function(cu){return cu<<0;},function(cv){return $$.String(cv);},ct);},Link:function(cw){var cx,cy;cx=g.ofArray([y.Attr().NewAttr("href","#")]);cy=v.Tags().NewTag("a",cx);u.OnAfterRender(function(cz){return A(cz.get_Body()).on("click",function(cA){cw.Trigger($.New(m,{$:0,$0:null}));return cA.preventDefault();});},cy);return cy;},Radio:function(cB,cC){var cD,cE,cF,cL;cD=(x.nextId())(null);cE=g.ofSeq(cC);cF=g.map(function(cG){var cH,cI;cH=v.Tags().NewTag("input",g.ofArray([y.Attr().NewAttr("type","radio"),y.Attr().NewAttr("name",cD)]));cI=function(cJ){return function(){return cJ.get_Body().checked?cB.Trigger($.New(m,{$:0,$0:cG})):null;};};w.Events().OnChange(cI,cH);return cH;},cE);cL=function(cM){var cN;if(cM.$==1){return null;}else{cN=cM.$0;return g.iter2(function(cO){return function(cP){cP.get_Body().checked=z.Equals(cO,cN);};},cE,cF);}};cL(cB.get_Latest());cB.Subscribe(cL);return cF;},RadioLabelled:function(cQ,cR){var cS,cU;cS=x.Radio(cQ,j.map(function(cT){return cT[0];},cR));cU=j.mapi2(function(cV){var cW;cW=cV[1];return function(cX){var cY,cZ,c0;cY=(x.nextId())(null);c0=g.ofArray([y.Attr().NewAttr("for",cY),v.Tags().text(cW)]);cZ=g.ofArray([u.add(cX,g.ofArray([y.Attr().NewAttr("id",cY)])),v.Tags().NewTag("label",c0)]);return v.Tags().NewTag("span",cZ);};},cR,cS);return v.Tags().NewTag("div",cU);},RenderChoice:function(c1,c2,c3){return c1.Choice(B.New(c3),c2);},RenderMany:function(c4,c5,c6){return c4.Render(B.New(c6),c5);},Select:function(c7,c8){var c9,c_,c$,dd,de,dh;c9=(x.nextId())(null);c_=C.ofSeq(c8);c$=C.map(function(da){var db,dc;db=da[1];dc=(x.nextId())(null);return u.add(v.Tags().NewTag("option",g.ofArray([y.Attr().NewAttr("value",dc)])),g.ofArray([v.Tags().text(db)]));},c_);dd=v.Tags().NewTag("select",c$);de=function(df){return function(){return df.get_Body().selectedIndex>=0?c7.Trigger($.New(m,{$:0,$0:(C.get(c_,df.get_Body().selectedIndex))[0]})):null;};};w.Events().OnChange(de,dd);dh=dd;u.OnAfterRender(function(){c7.Subscribe(function(dj){var dk,dl,dn;if(dj.$==1){return null;}else{dk=dj.$0;dl=C.tryFindIndex(function(dm){return z.Equals(dk,dm[0]);},c_);if(dl.$==0){return null;}else{dn=C.get(c$,dl.$0);return dn["HtmlProvider@33"].SetAttribute(dn.get_Body(),"selected","");}}});},dh);return dh;},Show:function(_do,dp,dq){return x.ShowResult(_do,function(dr){return dr.$==1?j.empty():dp(dr.$0);},dq);},ShowErrors:function(ds,dt,du){return x.ShowResult(ds,function(dv){return dv.$==1?dt(g.map(function(dw){return dw.get_Message();},dv.$0)):j.empty();},du);},ShowResult:function(dx,dy,dz){var dA;dA=i.Get(dy(dx.get_Latest()));try{while(dA.MoveNext()){dz.AppendI(dA.get_Current());}}finally{if(dA.Dispose!=undefined){dA.Dispose();}}dx.Subscribe(function(dB){var dC;dz["HtmlProvider@33"].Clear(dz.get_Body());dC=i.Get(dy(dB));try{while(dC.MoveNext()){dz.AppendI(dC.get_Current());}return;}finally{if(dC.Dispose!=undefined){dC.Dispose();}}});return dz;},ShowString:function(dD,dE,dF){return x.Show(dD,function(dG){var dH;dH=dE(dG);return g.ofArray([v.Tags().text(dH)]);},dF);},Submit:function(dI){var dJ,dK;dJ=v.Tags().NewTag("input",g.ofArray([y.Attr().NewAttr("type","submit")]));dK=function(){return function(){return dI.Trigger($.New(m,{$:0,$0:null}));};};w.Events().OnClick(dK,dJ);return dJ;},SubmitValidate:function(dN){var dO;dO=x.Submit(dN);return x.EnableOnSuccess(dN.get_Input(),dO);},TextArea:function(dP){var dQ,dR,dS,dT,dW;dQ=v.Tags();dR=$.New(h,{$:0});dS=dQ.NewTag("textarea",dR);dT=dP.get_Latest();if(dT.$==0){dS.set_Value(dT.$0);}dP.Subscribe(function(dU){var dV;if(dU.$==1){return null;}else{dV=dU.$0;return dS.get_Value()!==dV?dS.set_Value(dV):null;}});dW=function(){return dP.Trigger($.New(m,{$:0,$0:dS.get_Value()}));};dS.get_Body().addEventListener("keyup",dW,true);dS.get_Body().addEventListener("change",dW,true);return dS;},WithLabel:function(dY,dZ){var d0,d1,d2;d0=(x.nextId())(null);d2=g.ofArray([y.Attr().NewAttr("for",d0),v.Tags().text(dY)]);d1=g.ofArray([v.Tags().NewTag("label",d2),u.add(dZ,g.ofArray([y.Attr().NewAttr("id",d0)]))]);return v.Tags().NewTag("span",d1);},WithLabelAfter:function(d3,d4){var d5,d6,d7;d5=(x.nextId())(null);d7=g.ofArray([y.Attr().NewAttr("for",d5),v.Tags().text(d3)]);d6=g.ofArray([u.add(d4,g.ofArray([y.Attr().NewAttr("id",d5)])),v.Tags().NewTag("label",d7)]);return v.Tags().NewTag("span",d6);},input:function(d8,d9,d_,d$){var ea,eb,ec,ed,eg;ea=v.Tags();eb=g.ofArray([y.Attr().NewAttr("type",d8)]);ec=ea.NewTag("input",eb);ed=d$.get_Latest();if(ed.$==0){ec.set_Value(d_(ed.$0));}d$.Subscribe(function(ee){var ef;if(ee.$==1){return null;}else{ef=d_(ee.$0);return ec.get_Value()!==ef?ec.set_Value(ef):null;}});eg=function(){var ei;ei=$.New(m,{$:0,$0:d9(ec.get_Value())});return!z.Equals(ei,d$.get_Latest())?d$.Trigger(ei):null;};ec.get_Body().addEventListener("keyup",eg,true);ec.get_Body().addEventListener("change",eg,true);return ec;},nextId:$.Field(function(){var ej;ej=[0];return function(){D.incr(ej);return"pl__"+$$.String(ej[0]);};})},Disposable:$.Class({Dispose:function(){return this.dispose.call(null,null);}},{New:function(el){var em;em=$.New(this,{});em.dispose=el;return em;}}),ErrorMessage:$.Class({get_Message:function(){return this.message;},get_Source:function(){return this.source;}},{Create:function(en,eo){return E.New(en,eo.get_Id());},New:function(ep,eq){var er;er=$.New(this,{});er.message=ep;er.source=eq;return er;}}),Id:{next:$.Field(function(){var es;es=[0];return function(){D.incr(es);return es[0];};})},Many:{Operations:$.Class({get_Delete:function(){return p.New1(this["delete"]);},get_MoveDown:function(){return this.moveDown;},get_MoveUp:function(){return this.moveUp;}},{New:function(eu,ev,ew){var ex;ex=$.New(this,{});ex["delete"]=eu;ex.moveUp=ev;ex.moveDown=ew;return ex;}}),Stream:$.Class({AddRender:function(ey){return this.adder.view.call(null,ey);},Render:function(ez,eA){var eB,eE=this,e4;eB=function(eC){var eD,eG,eJ,eM,eO,eQ,eS,eU,eV,eW,eY,eZ,e0,e1;eD=eE.p.call(null,eC);eE.streams.Add(eD.stream);eD.stream.Subscribe(function(){return eE.update();});eG=function(){return j.findIndex(function(eI){return eI.get_Id()===eD.stream.get_Id();},eE.streams);};eJ=function(eK){var eL;if(eK>0?eK<eE.streams.get_Count():false){eL=eE.streams.get_Item(eK);eE.streams.set_Item(eK,eE.streams.get_Item(eK-1));eE.streams.set_Item(eK-1,eL);ez.MoveUp(eK);return eE.update();}else{return null;}};eM=function(){return eJ(eG(null)+1);};eO=function(){return eJ(eG(null));};eQ=function(){return eG(null)>0?$.New(m,{$:0,$0:null}):$.New(m,{$:1,$0:$.New(h,{$:0})});};eS=function(){return eG(null)<eE.streams.get_Count()-1?$.New(m,{$:0,$0:null}):$.New(m,{$:1,$0:$.New(h,{$:0})});};eU=l.New(eQ(null),{$:0});eV=l.New(eS(null),{$:0});eW=eE.out.Subscribe(function(){eU.Trigger(eQ(null));return eV.Trigger(eS(null));});eY=H.New(eU,false);eZ=H.New(eV,false);e0=eY.Subscribe(m.Iter(eO));e1=eZ.Subscribe(m.Iter(eM));return ez.Add(eD.view.call(null,eA(I.New(function(){var e3;e3=eG(null);eE.streams.RemoveAt(e3);ez.Remove(e3);eW.Dispose();e0.Dispose();e1.Dispose();return eE.update();},eY,eZ))));};e4=eE.out.get_Latest();if(e4.$==0){C.iter(eB,e4.$0);}eE.adder.stream.Subscribe(function(e5){return e5.$==0?eB(e5.$0):null;});return ez.get_Container();},Subscribe:function(e6){return this.out.Subscribe(e6);},get_Add:function(){return this.adder.stream;},get_Latest:function(){return this.out.get_Latest();},update:function(){var e7;e7=this.out;return e7.Trigger(m.Map(function(e8){return C.ofSeq(g.rev(e8));},j.fold(function(e9){return function(e_){var e$;e$=[e9,e_.get_Latest()];return e$[0].$==1?e$[1].$==1?$.New(m,{$:1,$0:g.append(e$[1].$0,e$[0].$0)}):$.New(m,{$:1,$0:e$[0].$0}):e$[1].$==1?$.New(m,{$:1,$0:e$[1].$0}):$.New(m,{$:0,$0:$.New(h,{$:1,$0:e$[1].$0,$1:e$[0].$0})});};},$.New(m,{$:0,$0:$.New(h,{$:0})}),this.streams)));}},{New:function(fa,fb,fc){var fd;fd=$.New(this,d.New(fb.get_Id()));fd.p=fa;fd.out=fb;fd.adder=fc;fd.streams=K.New2();return fd;}}),UnitStream:$.Class({get_Add:function(){return this.submitStream;}},{New:function(fe,ff,fg,fh){var fi,fj,fk,fl;fi=$.New(this,G.New(fe,ff,fg));fj=l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0});fk=fg.get_Stream();fl=function(fm){return fk.Trigger(fm);};fj.Subscribe(function(fn){return fn.$==0?fl($.New(m,{$:0,$0:fh})):fl($.New(m,{$:1,$0:fn.$0}));});fi.submitStream=fj;return fi;}})},Pervasives:{"Writer`1.Wrap.Static":function(fo,fp){return p.New(function(fq){return fp.Trigger(m.Map(fo,fq));});},"Writer`1.WrapAsync.Static":function(fr,fs){return M["Writer`1.WrapToAsyncResult.Static"](function(ft){return N.Delay(function(){return N.Bind(fr(ft),function(fv){return N.Return($.New(m,{$:0,$0:fv}));});});},fs);},"Writer`1.WrapAsyncResult.Static":function(fw,fx){return p.New(function(fy){return N.Start(N.Delay(function(){return N.Bind(fw(fy),function(fA){fx.Trigger(fA);return N.Return(null);});}),{$:0});});},"Writer`1.WrapResult.Static":function(fB,fC){return p.New(function(fD){return fC.Trigger(fB(fD));});},"Writer`1.WrapToAsyncResult.Static":function(fE,fF){return M["Writer`1.WrapAsyncResult.Static"](function(fG){return N.Delay(function(){return fG.$==1?N.Return($.New(m,{$:1,$0:fG.$0})):fE(fG.$0);});},fF);},"Writer`1.WrapToResult.Static":function(fI,fJ){return p.New(function(fK){return fJ.Trigger((m.Bind(fI))(fK));});},op_LessMultiplyGreater:function(fL,fM){var fN,fO;fN=fL.view;fO=fM.view;return $.New(O,{stream:P.Ap(fL.stream,fM.stream),view:function(fP){return fO(fN(fP));}});},op_LessMultiplyQmarkGreater:function(fQ,fR){var fS,fT;fS=fQ.view;fT=fR.view;return $.New(O,{stream:P.ApJoin(fQ.stream,fR.stream),view:function(fU){return fT(fS(fU));}});}},Piglet:{Builder:$.Class({Bind:function(fV,fW){return Q.Choose(fV,fW);},Return:function(fX){return Q.Return(fX);},ReturnFrom:function(fY){return fY;},Yield:function(fZ){return Q.Yield(fZ);},YieldFrom:function(f0){return f0;},Zero:function(){return Q.ReturnFailure();}}),Choose:function(f1,f2){var f3,f4;f3=l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0});f4=c.New(f1,f2,f3);return $.New(O,{stream:f3,view:function(f5){return f5(f4);}});},Confirm:function(f6,f7,f8){var f9,f_;f9=Q.Yield(f6);f_=M.op_LessMultiplyGreater(M.op_LessMultiplyGreater(Q.Return(function(f$){return function(ga){return[f$,ga];};}),f7(Q.Yield(f6))),f9);return Q.MapViewArgs(function(gb){return function(gc){return[gb,gc];};},Q.Map(function(gd){return gd[0];},R["Is'"](function(ge){return z.Equals(ge[0],ge[1]);},E.Create(f8,f9.get_Stream()),f_)));},FlushErrors:function(gf){return Q.MapResult(function(gg){return gg.$==1?$.New(m,{$:1,$0:$.New(h,{$:0})}):gg;},gf);},Many:function(gh,gi){return Q.ManyInit([gh],gh,gi);},ManyInit:function(gj,gk,gl){var gm,gn;gm=l.New($.New(m,{$:0,$0:gj}),{$:0});gn=L.New(gl,gm,gl(gk),gk);return $.New(O,{stream:gm,view:function(go){return go(gn);}});},ManyPiglet:function(gp,gq,gr){var gs,gt;gs=l.New($.New(m,{$:0,$0:gp}),{$:0});gt=G.New(gr,gs,gq);return $.New(O,{stream:gs,view:function(gu){return gu(gt);}});},Map:function(gv,gw){return Q.MapResult(function(gx){return gx.$==0?$.New(m,{$:0,$0:gv(gx.$0)}):$.New(m,{$:1,$0:gx.$0});},gw);},MapAsync:function(gy,gz){return Q.MapAsyncResult(function(gA){var gB;if(gA.$==0){gB=gA.$0;return N.Delay(function(){return N.Bind(gy(gB),function(gD){return N.Return($.New(m,{$:0,$0:gD}));});});}else{return N.Return($.New(m,{$:1,$0:gA.$0}));}},gz);},MapAsyncResult:function(gE,gF){var gG;gG=l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0});gF.stream.Subscribe(function(gH){return N.Start(N.Delay(function(){return N.Bind(gE(gH),function(gJ){return N.Return(gG.Trigger(gJ));});}),{$:0});});N.Start(N.Delay(function(){return N.Bind(gE(gF.stream.get_Latest()),function(gL){return N.Return(gG.Trigger(gL));});}),{$:0});return $.New(O,{stream:gG,view:gF.view});},MapResult:function(gM,gN){var gO;gO=l.New(gM(gN.stream.get_Latest()),{$:0});gN.stream.Subscribe(function(gP){return gO.Trigger(gM(gP));});return $.New(O,{stream:gO,view:gN.view});},MapResultWithWriter:function(gQ,gR){var gS;gS=l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0});gR.stream.Subscribe(gQ(gS));return $.New(O,{stream:gS,view:gR.view});},MapToAsyncResult:function(gT,gU){return Q.MapAsyncResult(function(gV){return gV.$==0?gT(gV.$0):N.Return($.New(m,{$:1,$0:gV.$0}));},gU);},MapToResult:function(gW,gX){return Q.MapResult(function(gY){return gY.$==0?gW(gY.$0):$.New(m,{$:1,$0:gY.$0});},gX);},MapViewArgs:function(gZ,g0){var g1;g1=g0.view;return $.New(O,{stream:g0.stream,view:function(g2){return g2(g1(gZ));}});},MapWithWriter:function(g3,g4){return Q.MapResultWithWriter(function(g5){return function(g6){var g7;if(g6.$==0){g7=g6.$0;return(g3(g5))(g7);}else{return g5.Trigger($.New(m,{$:1,$0:g6.$0}));}};},g4);},Render:function(g8,g9){return g9.view.call(null,g8);},Return:function(g_){return $.New(O,{stream:l.New($.New(m,{$:0,$0:g_}),{$:0}),view:function(g$){return g$;}});},ReturnFailure:function(){return $.New(O,{stream:l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0}),view:function(ha){return ha;}});},Run:function(hb,hc){return Q.RunResult(m.Iter(hb),hc);},RunResult:function(hd,he){he.stream.Subscribe(hd);return he;},TransmitReader:function(hf){var hg,hh;hg=hf.view;hh=hf.stream;return $.New(O,{stream:hf.stream,view:function(hi){return(hg(hi))(hh);}});},TransmitReaderMap:function(hj,hk){var hl,hm;hl=hk.view;hm=d.Map(hj,hk.stream);return $.New(O,{stream:hk.stream,view:function(hn){return(hl(hn))(hm);}});},TransmitReaderMapResult:function(ho,hp){var hq,hr;hq=hp.view;hr=d.MapResult(ho,hp.stream);return $.New(O,{stream:hp.stream,view:function(hs){return(hq(hs))(hr);}});},TransmitReaderMapToResult:function(ht,hu){var hv,hw;hv=hu.view;hw=d.MapToResult(ht,hu.stream);return $.New(O,{stream:hu.stream,view:function(hx){return(hv(hx))(hw);}});},TransmitStream:function(hy){var hz,hA;hz=hy.view;hA=hy.stream;return $.New(O,{stream:hy.stream,view:function(hB){return(hz(hB))(hA);}});},TransmitWriter:function(hC){var hD,hE;hD=hC.view;hE=hC.stream;return $.New(O,{stream:hC.stream,view:function(hF){return(hD(hF))(hE);}});},Validation:{Is:function(hG,hH,hI){var hJ;hJ=l.New(hI.stream.get_Latest(),{$:1,$0:hI.stream.get_Id()});hI.stream.Subscribe(function(hK){return hK.$==0?hG(hK.$0)?hJ.Trigger($.New(m,{$:0,$0:hK.$0})):hJ.Trigger($.New(m,{$:1,$0:g.ofArray([E.New(hH,hJ.get_Id())])})):hJ.Trigger($.New(m,{$:1,$0:hK.$0}));});return $.New(O,{stream:hJ,view:hI.view});},"Is'":function(hL,hM,hN){var hO;hO=l.New(hN.stream.get_Latest(),{$:1,$0:hN.stream.get_Id()});hN.stream.Subscribe(function(hP){return hP.$==0?hL(hP.$0)?hO.Trigger($.New(m,{$:0,$0:hP.$0})):hO.Trigger($.New(m,{$:1,$0:g.ofArray([hM])})):hO.Trigger($.New(m,{$:1,$0:hP.$0}));});return $.New(O,{stream:hO,view:hN.view});},Match:function(hQ){var hR;hR=new S(hQ);return function(hS){return hR.test(hS);};},NotEmpty:function(hT){return hT!=="";}},WithSubmit:function(hU){var hV,hW;hV=H.New(hU.stream,false);hW=hU.view;return $.New(O,{stream:hV.get_Output(),view:function(hX){return(hW(hX))(hV);}});},WithSubmitClearError:function(hY){var hZ,h0;hZ=H.New(hY.stream,true);h0=hY.view;return $.New(O,{stream:hZ.get_Output(),view:function(h1){return(h0(h1))(hZ);}});},Yield:function(h2){var h3;h3=l.New($.New(m,{$:0,$0:h2}),{$:0});return $.New(O,{stream:h3,view:function(h4){return h4(h3);}});},YieldFailure:function(){var h5;h5=l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0});return $.New(O,{stream:h5,view:function(h6){return h6(h5);}});},YieldOption:function(h7,h8){var h9,h$;h9=function(h_){return h_.$==1?h_.$0:h8;};h$=function(ia){return z.Equals(ia,h8)?{$:0}:{$:1,$0:ia};};return Q.MapViewArgs(function(ib){return P.Map(h9,h$,ib);},Q.Yield(h7));}},Piglet1:$.Class({get_Stream:function(){return this.stream;}}),Reader:$.Class({SubscribeImmediate:function(ic){return this.Subscribe(ic);},Through:function(id){var ie,ii=this;ie=l.New(this.get_Latest(),{$:0});id.Subscribe(function(_if){var ig,ih;if(_if.$==1){ig=_if.$0;ih=[ii.get_Latest(),g.filter(function(ij){return ij.get_Source()===ii.get_Id();},ig)];return ih[1].$==0?ie.Trigger(ii.get_Latest()):ih[0].$==1?ie.Trigger($.New(m,{$:1,$0:g.append(ih[0].$0,ih[1])})):ie.Trigger($.New(m,{$:1,$0:ih[1]}));}else{return ie.Trigger(ii.get_Latest());}});return ie;},get_Id:function(){return this.id;}},{Const:function(ik){return q.New($.New(m,{$:0,$0:ik}));},ConstResult:function(il){return q.New(il);},Map:function(im,_in){return d.MapResult(function(io){return m.Map(im,io);},_in);},Map2:function(ip,iq,ir){return d.MapResult2(function(is){return function(it){return m.Map2(ip,is,it);};},iq,ir);},MapResult:function(iu,iv){var iw;iw=l.New(iu(iv.get_Latest()),{$:0});iv.Subscribe(function(ix){return iw.Trigger(iu(ix));});return iw;},MapResult2:function(iy,iz,iA){var iB;iB=l.New((iy(iz.get_Latest()))(iA.get_Latest()),{$:0});iz.Subscribe(function(iC){return iB.Trigger((iy(iC))(iA.get_Latest()));});iA.Subscribe(function(iD){return iB.Trigger((iy(iz.get_Latest()))(iD));});return iB;},MapToResult:function(iE,iF){return d.MapResult(m.Bind(iE),iF);},New:function(iG){var iH;iH=$.New(this,{});iH.id=iG;return iH;}}),Result:$.Class({get_isSuccess:function(){return this.$==1?false:true;}},{Ap:function(iI,iJ){var iK;iK=[iI,iJ];return iK[0].$==1?iK[1].$==1?$.New(m,{$:1,$0:g.append(iK[0].$0,iK[1].$0)}):$.New(m,{$:1,$0:iK[0].$0}):iK[1].$==1?$.New(m,{$:1,$0:iK[1].$0}):$.New(m,{$:0,$0:iK[0].$0.call(null,iK[1].$0)});},Bind:function(iL){return function(iM){return iM.$==1?$.New(m,{$:1,$0:iM.$0}):iL(iM.$0);};},Failwith:function(iN){return $.New(m,{$:1,$0:g.ofArray([E.New(iN,0)])});},Iter:function(iO){return function(iP){return iP.$==1?null:iO(iP.$0);};},Join:function(iQ){return iQ.$==0?iQ.$0.$==0?$.New(m,{$:0,$0:iQ.$0.$0}):$.New(m,{$:1,$0:iQ.$0.$0}):$.New(m,{$:1,$0:iQ.$0});},Map:function(iR,iS){return iS.$==1?$.New(m,{$:1,$0:iS.$0}):$.New(m,{$:0,$0:iR(iS.$0)});},Map2:function(iT,iU,iV){var iW,iX;iW=[iU,iV];if(iW[0].$==1){return iW[1].$==1?$.New(m,{$:1,$0:g.append(iW[0].$0,iW[1].$0)}):$.New(m,{$:1,$0:iW[0].$0});}else{if(iW[1].$==1){return $.New(m,{$:1,$0:iW[1].$0});}else{iX=iW[1].$0;return $.New(m,{$:0,$0:(iT(iW[0].$0))(iX)});}}}}),Stream:{Ap:function(iY,iZ){var i0;i0=l.New(m.Ap(iY.get_Latest(),iZ.get_Latest()),{$:0});iY.Subscribe(function(i1){return i0.Trigger(m.Ap(i1,iZ.get_Latest()));});iZ.Subscribe(function(i2){return i0.Trigger(m.Ap(iY.get_Latest(),i2));});return i0;},ApJoin:function(i3,i4){var i5;i5=l.New(m.Ap(i3.get_Latest(),m.Join(i4.get_Latest())),{$:0});i3.Subscribe(function(i6){return i5.Trigger(m.Ap(i6,m.Join(i4.get_Latest())));});i4.Subscribe(function(i7){return i5.Trigger(m.Ap(i3.get_Latest(),m.Join(i7)));});return i5;},Map:function(i8,i9,i_){var i$,ja,jb;i$=l.New(m.Map(i8,i_.get_Latest()),{$:1,$0:i_.get_Id()});ja=[i_.get_Latest()];jb=[i$.get_Latest()];i_.Subscribe(function(jc){if(ja[0]!==jc){jb[0]=m.Map(i8,jc);return i$.Trigger(jb[0]);}else{return null;}});i$.Subscribe(function(jd){if(jb[0]!==jd){ja[0]=m.Map(i9,jd);return i_.Trigger(ja[0]);}else{return null;}});return i$;}},Stream1:$.Class({Subscribe:function(je){return T.subscribeTo(this.s,je);},Trigger:function(jf){return this.s.Trigger(jf);},Trigger1:function(jg){return this.Trigger(jg);},Write:function(jh){var jj=this;return p.New(function(ji){return ji.$==0?jj.Trigger($.New(m,{$:0,$0:jh})):jj.Trigger($.New(m,{$:1,$0:ji.$0}));});},get_Latest:function(){return this.s.Latest[0].$0;}},{New:function(jk,jl){return $.New(this,l.New1(W.New(jk),jl));},New1:function(jm,jn){var jo;jo=$.New(this,d.New(jn.$==0?(o.next())(null):jn.$0));jo.s=jm;return jo;}}),Submitter:$.Class({Subscribe:function(jp){return this.output.Subscribe(jp);},Trigger:function(){return this.writer.Trigger($.New(m,{$:0,$0:null}));},Trigger1:function(jq){return this.writer.Trigger(jq);},get_Input:function(){return this.input;},get_Latest:function(){return this.output.get_Latest();},get_Output:function(){return this.output;}},{New:function(jr,js){var jt;jt=$.New(this,d.New((o.next())(null)));jt.input=jr;jt.output=l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0});jt.writer=p.New(function(ju){var jv;jv=[ju,jt.input.get_Latest()];return jv[0].$==0?jv[1].$==0?jt.output.Trigger($.New(m,{$:0,$0:jv[1].$0})):jt.output.Trigger($.New(m,{$:1,$0:jv[1].$0})):jv[1].$==0?jt.output.Trigger($.New(m,{$:1,$0:jv[0].$0})):jt.output.Trigger($.New(m,{$:1,$0:g.append(jv[0].$0,jv[1].$0)}));});if(js){jt.input.Subscribe(function(){var jx;jx=jt.output.get_Latest();return jx.$==1?jx.$0.$==0?null:jt.output.Trigger($.New(m,{$:1,$0:$.New(h,{$:0})})):jt.output.Trigger($.New(m,{$:1,$0:$.New(h,{$:0})}));});}return jt;}})}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Piglets);b=$.Safe(a.Choose);c=$.Safe(b.Stream);d=$.Safe(a.Reader);e=$.Safe($$.WebSharper.Collections);f=$.Safe(e.Dictionary);g=$.Safe($$.WebSharper.List);h=$.Safe(g.T);i=$.Safe($$.WebSharper.Enumerator);j=$.Safe($$.WebSharper.Seq);k=$.Safe($$.WebSharper.Operators);l=$.Safe(a.Stream1);m=$.Safe(a.Result);n=$.Safe(a.ConcreteReader);o=$.Safe(a.Id);p=$.Safe(a.ConcreteWriter);q=$.Safe(a.ConstReader);r=$.Safe(a.Disposable);s=$.Safe($$.WebSharper.Html);t=$.Safe(s.Client);u=$.Safe(t.Operators);v=$.Safe(t.Tags);w=$.Safe(t.EventsPervasives);x=$.Safe(a.Controls);y=$.Safe(t.Attr);z=$.Safe($$.WebSharper.Unchecked);A=$.Safe($$.jQuery);B=$.Safe(x.HtmlContainer);C=$.Safe($$.WebSharper.Arrays);D=$.Safe($$.WebSharper.Ref);E=$.Safe(a.ErrorMessage);F=$.Safe(a.Many);G=$.Safe(F.Stream);H=$.Safe(a.Submitter);I=$.Safe(F.Operations);J=$.Safe(e.ResizeArray);K=$.Safe(J.ResizeArrayProxy);L=$.Safe(F.UnitStream);M=$.Safe(a.Pervasives);N=$.Safe($$.WebSharper.Concurrency);O=$.Safe(a.Piglet1);P=$.Safe(a.Stream);Q=$.Safe(a.Piglet);R=$.Safe(Q.Validation);S=$.Safe($$.RegExp);T=$.Safe($$.WebSharper.Util);U=$.Safe($$.IntelliFactory);V=$.Safe(U.Reactive);return W=$.Safe(V.HotStream);});$.OnLoad(function(){$.Inherit(c,d);$.Inherit(n,d);$.Inherit(q,d);$.Inherit(G,d);$.Inherit(G,d);$.Inherit(L,G);$.Inherit(l,d);$.Inherit(H,d);o.next();x.nextId();return;});}());
